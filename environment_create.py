#!/usr/bin/python3
import os
import subprocess
import sys

class EnvCreate:
    def __init__(self, name):
        self.name = name
        self.pwd = os.getcwd()
        self.paths = {}
        for dirname in ["notes", "exploit", "www", "web", "recon", "ftp", "smb"]:
            self.paths[dirname] = "{}/{}/{}".format(self.pwd, self.name, dirname)
        self.pwd = os.getcwd()

    def create_dirs(self):
        os.mkdir("{}/{}".format(self.pwd, self.name))
        for path in self.paths:
            os.mkdir(self.paths[path])

    def finish(self):
        result = subprocess.run(['which', 'tmux'], stdout=subprocess.PIPE)
        if result == "":
            print("[!] Done!")
            os.system("clear")
            sys.exit()
        print("[!] Done! You will now be in a tmux session called {}.\n[!] Press enter to continue.\n[!] Good luck!".format(self.name))
        input()
        os.system("cd ./{} && tmux new-session -s {} \; new-window \; new-window \; new-window \; attach".format(self.name, self.name))


if __name__ == "__main__":
    print("""
----------------------------------------------------------------------
    ____        __               ____      ____     _____            
   / __ \____  / /___ _____     /  _/___  / __/___ / ___/___  _____
  / / / / __ \/ / __ `/ __ \    / // __ \/ /_/ __ \\\__ \/ _ \/ ___/
 / /_/ / /_/ / / /_/ / / / /  _/ // / / / __/ /_/ /__/ /  __/ /__  
/_____/\____/_/\__,_/_/ /_/  /___/_/ /_/_/  \____/____/\___/\___/  
                                                                   

        Pentest Environment Creator
        Made By : Kyand
-----------------------------------------------------------------------
    """)
    name = input("[!] Name of pentest project : ")
    environment = EnvCreate(name)
    environment.create_dirs()
    environment.finish()
